
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>AzYet&#39;s Notebook</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="PC_Chen">
    

    
    <meta name="description" content="milestones">
<meta property="og:type" content="website">
<meta property="og:title" content="AzYet's Notebook">
<meta property="og:url" content="http://azyet.github.io/page/7/index.html">
<meta property="og:site_name" content="AzYet's Notebook">
<meta property="og:description" content="milestones">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AzYet's Notebook">
<meta name="twitter:description" content="milestones">
<link rel="publisher" href="107081205815475260000">

    
    <link rel="alternative" href="/atom.xml" title="AzYet&#39;s Notebook" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/avatar_bear.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/avatar_bear.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/avatar_bear.png" alt="AzYet&#39;s Notebook" title="AzYet&#39;s Notebook"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="AzYet&#39;s Notebook">AzYet&#39;s Notebook</a></h1>
				<h2 class="blog-motto">Just writing some notes as memo, nothing complicated.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:azyet.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/22/theGreatCannon/" title="The Great Cannon" itemprop="url">The Great Cannon</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-22T14:35:05.000Z" itemprop="datePublished"> 发表于 2015-05-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>　　听说在GFW之外我们又有一个大杀器GreatCannon， 好奇之下找了一篇文章翻翻，顺便部分翻译了一下。</p>
<p>　　看完之后的感受是，所谓GreatCannon不过是利用了独有的资源，并没啥高精尖的东西，不过，了解人家分析日志的追踪攻击的过程还挺有意思，当作一次了解运维和安全的机会吧。</p>
<h2 id="利用百度来操纵百万级电脑发起DDoS">利用百度来操纵百万级电脑发起DDoS</h2><p>　　通过在诸如Amazon的Clound Front这样的大型CDN上部署一组在线镜像站点，GreatFire.org工程成功地解除中国国内对一些站点的屏蔽。</p>
<p>　　2015-3-18,项目网站报道前一天遭受了大规模的DOS攻击。这篇文档详细介绍了这次有史以来最大规模的应用层了攻击是如何实施的。</p>
<p>　　攻击者实现了一种隐秘机制来操作大量的合法流量，境内或境外，来发起和操纵DDOS攻击反审查项目CloundFront和GreatFire.org项目。</p>
<p>文档揭示了</p>
<pre><code>访问中国数千网站的全球用户被随机收到恶意代码来实施攻击。

当正常用户加载以下百度服务器dup<span class="class">.baidustatic</span><span class="class">.com</span>, ecomcbjs<span class="class">.jomodns</span><span class="class">.com</span>, cbjs<span class="class">.e</span><span class="class">.shifen</span><span class="class">.com</span>, hm<span class="class">.baidu</span><span class="class">.com</span>, eclick<span class="class">.baidu</span><span class="class">.com</span>, pos<span class="class">.baidu</span><span class="class">.com</span>, cpro<span class="class">.baidu</span><span class="class">.com</span> and hm<span class="class">.e</span><span class="class">.shifen</span><span class="class">.com</span>的资源时，恶意代码以JavaScript的形式发送。

百度的分析代码h.js被替换成恶意代码触发攻击。

恶意代码被无差别地发送给全球任何用户，唯一的目的即发起到CloundFront和GreatFire的攻击

百万级的用户成为攻击目标，转而攻击Amazon的基础设施

窜改发生在来自中国以外的流量访问百度服务器时
</code></pre>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/22/theGreatCannon/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/网络/">网络</a><a href="/tags/great-cannon/">great cannon</a><a href="/tags/安全/">安全</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/21/zookeeperNote7/" title="ZooKeeper学习笔记（七）之方法和解决方案" itemprop="url">ZooKeeper学习笔记（七）之方法和解决方案</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-21T09:41:26.000Z" itemprop="datePublished"> 发表于 2015-05-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="用ZooKeeper构建高级结构">用ZooKeeper构建高级结构</h2><p>　　这节中讲述使用ZooKeeper构建高级功能的方法，都是一些传统的，不需要ZooKeeper特殊支持的功能。希望社区能够在client端的库中考虑这些传统来简化使用和促进标准化。</p>
<p>　　有意思的是虽然ZooKeeper使用异步通知，却可以用它来构造一致同步的基元，比如队列和锁。这是因为ZooKeeper实现了更新的整体有序，并有向外展示这种有序的机制。</p>
<p>　　所有设计遵循实用原则，特别避免了轮询，计时和任何导致“羊群效应”的事情，避免网络暴发和扩容受限。</p>
<p>　　还有很多可以想象的有用功能这里没有提到，比如可撤销读写优先级锁。列举的功能也可以以其它方式实现，总之本文只是为了刺激大家的想象力。</p>
<h2 id="原装可用的功能">原装可用的功能</h2><p>　　<code>目录服务</code>和<code>配置</code>是两大ZooKeeper直接提供的功能，另一个是<code>组员管理</code>，组由znode表示，成员由之下的瞬时node表示，掉线的成员被服务检测到后会自动删除。</p>
<h2 id="Barrier">Barrier</h2><p>　　分布式系统使用Barrier来阻塞一组进程直到某条件满足。ZooKeeper设计一个barrier node来实现Barrier功能。node存在代表Barrier存在。伪代码如下：</p>
<pre><code>client调用<span class="keyword">exists</span>并设置watch

如果<span class="keyword">exists</span>返回假，barrier不存在，进程继续

如果<span class="keyword">exists</span>返回真，有barrier，进程阻塞等待watch事件

收到watch事件时重新调用<span class="keyword">exists</span>……直到barrier移除
</code></pre>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/21/zookeeperNote7/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/Double-Barriers/">Double Barriers</a><a href="/tags/Priority-Queues/">Priority Queues</a><a href="/tags/Recoverable-Shared-Locks/">Recoverable Shared Locks</a><a href="/tags/leader-election/">leader election</a><a href="/tags/Two-phased-Commit/">Two-phased Commit</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/21/zookeeperNote6/" title="ZooKeeper学习笔记（六）之Java例程" itemprop="url">ZooKeeper学习笔记（六）之Java例程</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-20T16:44:26.000Z" itemprop="datePublished"> 发表于 2015-05-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>　　之前小节中已经写过快速入门的例程，但在进一步了解了更多的概念之后，需要更多的实践来加深印象。总之理论学习和实践穿插进行在我看来是一种不错的方式，重要的是在参照教程编写代码的同时不要只求快速跑通，而应该与之前的看过的原理结合起来。</p>
<h2 id="一个简单的Watch客户端">一个简单的Watch客户端</h2><p>　　watch一个znode，用启动和停止特定程序的方式作出回应。</p>
<h3 id="Requirements">Requirements</h3><ol>
<li>接收的参数:<blockquote>
<p> 服务地址<br> 需要watch的znode<br> 可执行程序+参数</p>
</blockquote>
</li>
<li>从zonde中取得数据并运行程序</li>
<li>如果znode变化，用新的数据重启程序</li>
<li>如果znode删除，终止程序</li>
</ol>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/21/zookeeperNote6/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/Java例程/">Java例程</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/20/zookeeperNote5/" title="ZooKeeper学习笔记（五）之基本概念-续" itemprop="url">ZooKeeper学习笔记（五）之基本概念-续</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-20T15:33:26.000Z" itemprop="datePublished"> 发表于 2015-05-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="ACL_权限">ACL 权限</h2><p>ZooKeeper支持以下权限：</p>
<pre><code><span class="operator"><span class="keyword">CREATE</span> : you can <span class="keyword">create</span> a child node

<span class="keyword">READ</span> : you can <span class="keyword">get</span> <span class="keyword">data</span> <span class="keyword">from</span> a node <span class="keyword">and</span> list its children.

<span class="keyword">WRITE</span> : you can <span class="keyword">set</span> <span class="keyword">data</span> <span class="keyword">for</span> a node

<span class="keyword">DELETE</span> : you can <span class="keyword">delete</span> a child node

ADMIN : you can <span class="keyword">set</span> permissions</span>
</code></pre><p>　　创建和删除被从写的权限中抽离出来以实现更<strong>细粒度</strong>的控制.    </p>
<p>　　因为ZooKeeper并无znode拥有者的概念，所以设计了<code>ADMIN</code>权限。ZooKeeper默认所有人拥有excute/lookup权限。</p>
<h2 id="内建ACL策略">内建ACL策略</h2><p>　　ZooKeeeper有以下内建策略。</p>
<blockquote>
<p>   world ： 有唯一id，anyone，表示任何人</p>
<p>   auth ： 不使用id, 代表认证用户</p>
<p>   digest ： 用 username:password 来生成 MD5 hash作为id. 认证使用username:password形式的明文， ACL中密码采用base64 编码的密码 的SHA1哈希.</p>
<p>   ip ：使用client IP 作为id. expression为<code>addr/bits</code>形式.</p>
</blockquote>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/20/zookeeperNote5/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/分布式/">分布式</a><a href="/tags/ACL/">ACL</a><a href="/tags/Binding/">Binding</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/20/zookeeperNote4/" title="ZooKeeper学习笔记（四）之基本概念" itemprop="url">ZooKeeper学习笔记（四）之基本概念</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-20T10:50:10.000Z" itemprop="datePublished"> 发表于 2015-05-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="ZooKeeper数据模型">ZooKeeper数据模型</h2><p>　　ZooKeeper拥有一个层级结构的目录空间，非常类似分布式文件系统，唯一的不同是每个<strong>node可同时拥有数据和子node</strong>，即文件同时也是目录。<strong>只使用绝对路径</strong>，总的来说任何Unicode字符都可以作为路径的一部分，但遵循以下约束:</p>
<blockquote>
<p>null(\u0000)不能用在path中，因为在C中会导致Binding异常。</p>
<p>以下字符因为不能很好显示或易让人迷惑，不可用在path中：\u0001 - \u0019 and \u007F - \u009F.</p>
<p>以下字符也不允许使用： \ud800 -uF8FFF, \uFFF0-uFFFF, \uXFFFE - \uXFFFF (X 代表 1 - E), \uF0000 - \uFFFFF.</p>
<p>.和..可用，但不能单独用来表示node, 亦即/a/b/./c” or “/a/b/../c都是非法的。</p>
<p>zookeeper是保留字</p>
</blockquote>
<h2 id="ZNodes">ZNodes</h2><p>　　ZooKeeper tree中的每一个Node都指向一个znode, znode维护一个状态结构，结构中包含<code>数据/acl  更新的版本号</code>和<code>时间戳</code>，二者共同用于验证缓存和同步更新。znode每更新一次 ，版本号增加，读取数据时会得到相应的<strong>版本号</strong>，更新数据时也应提供版本号，如果版本号不符，操作失败（注：提供强制模式，会忽略版本号）。</p>
<p>　　Znode是应用访问最多的实体，有以下两个特性值得关注。</p>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/20/zookeeperNote4/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/分布式/">分布式</a><a href="/tags/znode/">znode</a><a href="/tags/watch/">watch</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/20/zookeeperNote3/" title="ZooKeeper学习笔记（三）之开发入门-续" itemprop="url">ZooKeeper学习笔记（三）之开发入门-续</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-19T17:50:10.000Z" itemprop="datePublished"> 发表于 2015-05-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p> 这一节中我们要对上一节中的Barrier和Queue用例进行测试和分析，填补忽略的细节，加深印象。</p>
<h2 id="Barrier">Barrier</h2><p> 首先我们来看测试main方法，为了更方便地进行Debug和日志输出，暂没有使用不是太熟悉的Junit.</p>
<h3 id="测试代码">测试代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> ZKBarrier zkBarrier = new ZKBarrier(&quot;dell:2181&quot;, &quot;/testRoot3&quot;, 3);</div><div class="line"> </div><div class="line">//purge the children under testrRoot</div><div class="line"></div><div class="line">zkBarrier.name = args[0];</div><div class="line">System.out.println(&quot;Entering the Barrier&quot;);</div><div class="line">zkBarrier.enter();</div><div class="line">System.out.println(&quot;Work done, leaving&quot;);</div><div class="line">zkBarrier.leave();</div><div class="line">return;</div></pre></td></tr></table></figure>
<p> 大致的流程如下：</p>
<pre><code>等待其它进程（总数3）就绪
开始工作
等待所有Node删除，退出
</code></pre>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/20/zookeeperNote3/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/开发入门/">开发入门</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/分布式/">分布式</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/19/zookeeperNote2/" title="ZooKeeper学习笔记（二）之开发入门" itemprop="url">ZooKeeper学习笔记（二）之开发入门</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-19T11:32:10.000Z" itemprop="datePublished"> 发表于 2015-05-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>这一节中我们演示用ZooKeeper创建一个简单的barrier和producer-consumer队列。当然首先你必须有至少一个ZooKeeper Server在运行。</p>
<h2 id="基类">基类</h2><p>barrier和queue都将用到以下共同代码，构造方法会创建到Server的连接。</p>
<pre><code>注意：官网教程没有提到，这个基类是要实现Watcher接口的，这样<span class="built_in">process</span>方法才能作为回调方法收到消息
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">static ZooKeeper zk = null;</div><div class="line">    static final Object mutex = new Object();</div><div class="line"></div><div class="line">    String root;</div><div class="line"></div><div class="line">    SyncPrimitive(String address)</div><div class="line">            throws KeeperException, IOException &#123;</div><div class="line">        if(zk == null)&#123;</div><div class="line">            System.out.println(&quot;Starting ZK:&quot;);</div><div class="line">            zk = new ZooKeeper(address, 3000, (Watcher) this);</div><div class="line">            System.out.println(&quot;Finished starting ZK: &quot; + zk);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void process(WatcherEvent event) &#123;</div><div class="line">        synchronized (mutex) &#123;</div><div class="line">            mutex.notify();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">      public void process(WatchedEvent watchedEvent) &#123;</div><div class="line">        synchronized (mutex) &#123;</div><div class="line">            mutex.notify();</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>WatchEvent包含的信息有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/testRoot1</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/19/zookeeperNote2/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/开发入门/">开发入门</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/分布式/">分布式</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/19/zookeeperNote1/" title="ZooKeeper学习笔记（一）之概览" itemprop="url">ZooKeeper学习笔记（一）之概览</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-19T09:56:10.000Z" itemprop="datePublished"> 发表于 2015-05-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>ZooKeeper致力于开发一种能提供高可靠分布式协同的开源服务。</p>
<h2 id="什么是ZooKeeper">什么是ZooKeeper</h2><p>Zookeeper是一个集中式的服务，提供配置信息维护、命名（目录）、分布式同步和组服务功能。上述服务在分布式系统中被广泛地以各种形式使用。这些服务通常伴随着大量不可避免的Bug和竞争条件。正因为上述服务的实施困难，应用程序通常在开始时会在此妥协，导致程序脆弱和难于维护。即使没有错误，不同的部署也会导致管理的复杂。</p>
<pre><code>naming <span class="keyword">service</span> 也称<span class="literal">directory</span> <span class="keyword">service</span>.
</code></pre><p>协同一个分布式系统就像管理一个动物园。</p>
<p>ZooKeeper致力于将上述服务的必要部分提取成一组非常简单的集中协同服务API。服务本身就是分布式和高可靠的。一致性、组管理和presence协议将由服务提供，应用不必自己来实现。应用程序使用特定服务由ZooKeeper特定组件和应用程序特定convention组成。ZooKeeper提供的配方将表明这些简单服务可以用来构建强大的抽象。</p>
<p>ZooKeeper本身有C和Java的实现，并提供多种Client绑定，含Python Ruby和Go。</p>
<h2 id="ZooKeepr概览">ZooKeepr概览</h2><p>ZooKeeper允许分布式进程通过共享的层级的数据注册命令空间（类似文件系统）来相互协同。不同于文件系统的是，ZooKeeper为Client提供<strong>高吞吐量，低延时，高可用和顺序严格</strong>的znode存取。高性能全ZooKeeper可被用在大型的分布式系统。高可靠保证ZooKeeper不会成为系统的单点命门。严格的顺序使复杂的同步单元可在Client上实施。命名空间则非常类似标准的文件系统。</p>
<p><img src="https://cwiki.apache.org/confluence/download/attachments/24193436/service.png?version=1&amp;modificationDate=1295027310000&amp;api=v2" alt=""></p>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/19/zookeeperNote1/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/ZooKeeper/">ZooKeeper</a><a href="/tags/分布式/">分布式</a><a href="/tags/概览/">概览</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/19/junitNote1/" title="单元测试之JUnit学习笔记" itemprop="url">单元测试之JUnit学习笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-19T03:59:40.000Z" itemprop="datePublished"> 发表于 2015-05-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>JUnit是xUnit在Java中的应用，是一种单元测试框架。JUnit在编译时以Jar的形式链接，根据2013年对github 10,000个项目的调查，Junit和slf4j并列为最受欢迎的库，出现率为30.7%。</p>
<h2 id="单元测试，一致性测试和性能测试">单元测试，一致性测试和性能测试</h2><h3 id="单元测试">单元测试</h3><p>单元测试是一段会执行目标工程中指定功能（测试对象）的代码，并验证它的行为。</p>
<p>被测试的代码比例也叫做覆盖率。</p>
<p>单元测试只针对一小段代码（类，方法），外部依赖应该被移除，例如用测试框架模拟外部依赖。</p>
<p>单元测试并不适合复杂的UI或组件交互，这部分工作属于一致性测试。</p>
<h3 id="一致性测试">一致性测试</h3><p>旨在测试组件或组件间的一致性，有时也称为功能测试。</p>
<p>这种测试将用例转化为测试集，例如模拟一个用户与应用交互。</p>
<h3 id="性能测试">性能测试</h3><p>反复进行基准测试。</p>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/19/junitNote1/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/JUnit/">JUnit</a><a href="/tags/单元测试/">单元测试</a><a href="/tags/Maven/">Maven</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/19/rabbitmqNote6/" title="RabbitMQ学习笔记（六）之RPC" itemprop="url">RabbitMQ学习笔记（六）之RPC</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/107081205815475260000?rel=author" title="PC_Chen" target="_blank" itemprop="author">PC_Chen</a>
		
  <p class="article-time">
    <time datetime="2015-05-18T18:30:00.000Z" itemprop="datePublished"> 发表于 2015-05-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>第二节中我们学习了如何使用工作队列来在多个工作进程中分发费时的任务。</p>
<p>但是如果我们需要运行一个远程的函数并且需要等待返回结果会怎样？这是一种完全不同的机制，通常叫做RPC（Remote Procedure Call）远程方法调用。</p>
<p>这一节中我们将使用RabbitMQ来建造一个RPC系统：一个Client和一个可扩容的RPC Server。因为没有真正值得分布式化的任务，我们用Fibonacci数列来代替。</p>
<h2 id="Client接口">Client接口</h2><p>为了演示RPC Service是如何使用的，我们将编写一个简单的Client类。它提供一个名为call的方法，发出RPC请求并在返回之前阻塞。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FibonacciRpcClient fibonacciRpc = new FibonacciRpcClient();   </div><div class="line">String result = fibonacciRpc.call(&quot;4&quot;);</div><div class="line">System.out.println( &quot;fib(4) is &quot; + result);</div></pre></td></tr></table></figure>
<pre><code>注：虽然RPC很常见，但也备受批评。问题在于程序无法得知调用的方法是远程（较慢）还是本地，这种模糊将导致系统不可预期以及不必要的额外调试复杂度，可能导致不可维护的<span class="escape">`意</span>面代码<span class="escape">`。</span>
确保方法远程或本地的明确性，作好文档。使组件之间的依赖关系清晰。处理异常情况，比如RPC不可用。存疑时尽量避免使用RPC。如果可能，使用异步方式，用状态转移代替阻塞。
</code></pre>
        
        
        <p class="article-more-link">
          
            <a href="/2015/05/19/rabbitmqNote6/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/学习笔记/">学习笔记</a><a href="/tags/rabbitmq/">rabbitmq</a><a href="/tags/RPC/">RPC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/6/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/8/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="azyet" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/学习笔记/" title="学习笔记">学习笔记<sup>31</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Go语言/" title="Go语言">Go语言<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/算法/" title="算法">算法<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/rabbitmq/" title="rabbitmq">rabbitmq<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/ansible/" title="ansible">ansible<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/笔试题/" title="笔试题">笔试题<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/分布式/" title="分布式">分布式<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/开发入门/" title="开发入门">开发入门<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/操作系统/" title="操作系统">操作系统<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/android/" title="android">android<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/simics/" title="simics">simics<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/内存虚拟化/" title="内存虚拟化">内存虚拟化<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/scala/" title="scala">scala<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/网络/" title="网络">网络<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/IPv6/" title="IPv6">IPv6<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/adb/" title="adb">adb<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/hindsight/" title="hindsight">hindsight<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Windows/" title="Windows">Windows<sup>3</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://bbs.byr.cn" target="_blank" title="BYR">BYR</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1441941451&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> coding in Beijing <br/>
			Sim(n)p(g)le &amp; Happy</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/1441941451" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/azyet" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		<a href="https://www.facebook.com/pc.chen.940" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		<a href="http://www.zhihu.com/people/pc-chen" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		<a href="https://plus.google.com/107081205815475260000?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:cgnphe#126.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="PC_Chen">PC_Chen</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?43a04b04995277b88dba7208cda9e829";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
